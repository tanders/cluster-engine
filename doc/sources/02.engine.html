<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html>
<head>
<link rel="Stylesheet" type="text/css" href="../cludg.css"/>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"/>
<title>
02.engine</title>
</head>
<body>
<div id="navbar">
<table cellspacing="0" cellpadding="0" border="0" style="width: 100%;">
<colgroup span="3">
<col width="0*"/>
<col width="0*"/>
<col width="1*"/>
</colgroup>
<tr>
<td align="left" valign="baseline">
<a href="01.domain.html">
Prev:&nbsp;01.domain</a>
<br/>
<a href="03.Fwd-rules.html">
Next:&nbsp;03.Fwd-rules</a>
</td>
<td>
&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td align="left" valign="baseline">
<span class="upchain">
<b>
02.engine</b>
<br/>
<a href="../index.html">
Index</a>
</span>
&nbsp;&nbsp;&nbsp;&nbsp;</td>
</tr>
</table>
</div>
<div class="cludg-doc-body">
<h2>
02.engine
</h2>
<table style="width: 100%;" class="summary-table">
<tr class="table-heading-color">
<th class="summary" colspan="2">
Function summary</th>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="02.engine.html#_g180182">
assign-pitches-for-motif</a>
</td>
<td class="summary">
engine vsolution vindex</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="02.engine.html#_g180184">
assign-pitches-for-motif</a>
</td>
<td class="summary">
engine vsolution vindex</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="02.engine.html#_g180183">
assign-pitches-for-nth-motif</a>
</td>
<td class="summary">
engine vsolution vindex nth</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="02.engine.html#_g180185">
assign-pitches-for-nth-motif</a>
</td>
<td class="summary">
engine vsolution vindex nth</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="02.engine.html#_g180194">
backjump-engine</a>
</td>
<td class="summary">
engine vbackjump-indexes vbacktrack-history vindex vsolution</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="02.engine.html#_g180195">
backjump-engine</a>
</td>
<td class="summary">
engine vbackjump-indexes vbacktrack-history vindex vsolution</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="02.engine.html#_g180193">
backjump-engine-bad</a>
</td>
<td class="summary">
engine vbackjump-indexes vbacktrack-history vindex vsolution</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="02.engine.html#_g180186">
compare-timesign</a>
</td>
<td class="summary">
find-this test-this</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="02.engine.html#_g180178">
debug-print-and-update-maxindex</a>
</td>
<td class="summary">
vindex vmax-index vsolution current-engine nr-of-engines</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="02.engine.html#_g180191">
fail</a>
</td>
<td class="summary">
vcurrent-engine vsolution vlinear-solution vsolution-for-backjump vindex meter-beatstructures meter-onsetgrids nr-of-engines default-engine-order vbacktrack-history backtrackrule vbacktrack-engines vbackjump-indexes vflag-changed-engine vnumber-of-candidates vheuristic-rules debug?</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="02.engine.html#_g180196">
get-index-during-search</a>
</td>
<td class="summary">
engine</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="02.engine.html#_g180189">
initiate-new-variable</a>
</td>
<td class="summary">
engine vindex vsolution vdomain meter-beatstructures meter-onsetgrids nr-of-engines rnd?</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="02.engine.html#_g180176">
poly-engine</a>
</td>
<td class="summary">
max-index domains metric-domain nr-of-voices locked-engines forwardrule backtrackrule rnd? vrules vheuristic-rules debug?</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="02.engine.html#_g180177">
print-and-update-maxindex</a>
</td>
<td class="summary">
vindex vmax-index current-engine</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="02.engine.html#_g180180">
put-domains-in-vector</a>
</td>
<td class="summary">
nr-of-engines vdomain domains metric-domain</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="02.engine.html#_g180187">
remove-n</a>
</td>
<td class="summary">
n list</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="02.engine.html#_g180188">
rnd-perm</a>
</td>
<td class="summary">
list</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="02.engine.html#_g180181">
set-default-engineorder</a>
</td>
<td class="summary">
vdefault-engine-order nr-of-engines vdomain locked-engines</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="02.engine.html#_g180190">
set-timepoints-and-count-for-current-candidate</a>
</td>
<td class="summary">
engine vindex vsolution meter-beatstructures meter-onsetgrids nr-of-engines</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="02.engine.html#_g180192">
set-vbacktrack-history</a>
</td>
<td class="summary">
vbacktrack-history vindex vsolution engine nr-of-engines</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="02.engine.html#_g180179">
store-temp-solution-for-maxindex-to-debug-vector2</a>
</td>
<td class="summary">
vindex vmax-index vsolution current-engine nr-of-engines</td>
</tr>
</table>
<div class="defparam">
<div class="defunsignatures">
<a id="_g180171">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
*backjump?*&nbsp;&nbsp;</td>
<td class="lambda-list">
</td>
<td class="symbol-type">
&nbsp;[Variable]</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="defparam">
<div class="defunsignatures">
<a id="_g180172">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
*stop?*&nbsp;&nbsp;</td>
<td class="lambda-list">
</td>
<td class="symbol-type">
&nbsp;[Variable]</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="defparam">
<div class="defunsignatures">
<a id="_g180173">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
*always-lock-meter?*&nbsp;&nbsp;</td>
<td class="lambda-list">
</td>
<td class="symbol-type">
&nbsp;[Variable]</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="defparam">
<div class="defunsignatures">
<a id="_g180174">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
*max-nr-of-loops*&nbsp;&nbsp;</td>
<td class="lambda-list">
</td>
<td class="symbol-type">
&nbsp;[Variable]</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="defparam">
<div class="defunsignatures">
<a id="_g180175">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
*vindex*&nbsp;&nbsp;</td>
<td class="lambda-list">
</td>
<td class="symbol-type">
&nbsp;[Variable]</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g180176">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
poly-engine&nbsp;&nbsp;</td>
<td class="lambda-list">
max-index domains metric-domain nr-of-voices locked-engines forwardrule backtrackrule rnd? vrules vheuristic-rules debug?</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
Strange bug:bktr-rule cannot be forwarded from this function...It is given in the fail subroutine instead. 
 Locked engines cannot be backtracked. 
 </p>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g180177">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
print-and-update-maxindex&nbsp;&nbsp;</td>
<td class="lambda-list">
vindex vmax-index current-engine</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
This function stores the highest index so far for each engine, and prints the 
 vector of highest indexes everytime it exceeds the previous maximum. 
 </p>
<p>
This diagnosis gives an indication if the search is stuck at a certain point 
 among the variables. 
 </p>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g180178">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
debug-print-and-update-maxindex&nbsp;&nbsp;</td>
<td class="lambda-list">
vindex vmax-index vsolution current-engine nr-of-engines</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
1.This function stores the temporary solution when an index exceeds its previous maximum. 
 </p>
<p>
2. This function also stores the highest index so far for each engine, and prints the 
 vector of highest indexes everytime it exceeds the previous maximum. 
 </p>
<p>
This diagnosis gives an indication if the search is stuck at a certain point 
 among the variables. 
 </p>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g180179">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
store-temp-solution-for-maxindex-to-debug-vector2&nbsp;&nbsp;</td>
<td class="lambda-list">
vindex vmax-index vsolution current-engine nr-of-engines</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
This function stores the temporary solution when an index exceeds its previous maximum. 
 </p>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g180180">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
put-domains-in-vector&nbsp;&nbsp;</td>
<td class="lambda-list">
nr-of-engines vdomain domains metric-domain</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
The domains are always in the order rhythm - pitches - rhythm - pitches... - meter. 
 Empty sublists will be added for additional information (onsets, number of pitches, etc.). 
 </p>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g180181">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
set-default-engineorder&nbsp;&nbsp;</td>
<td class="lambda-list">
vdefault-engine-order nr-of-engines vdomain locked-engines</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
Metric engine is first. Rhythm engine comes before pitch engine. Voices are in order form low to high. 
 </p>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g180182">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
assign-pitches-for-motif&nbsp;&nbsp;</td>
<td class="lambda-list">
engine vsolution vindex</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
index has to be 1 or larger - otherwise this function wil give an error 
 </p>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g180183">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
assign-pitches-for-nth-motif&nbsp;&nbsp;</td>
<td class="lambda-list">
engine vsolution vindex nth</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
index has to be 1 or larger - otherwise this function wil give an error 
 </p>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g180184">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
assign-pitches-for-motif&nbsp;&nbsp;</td>
<td class="lambda-list">
engine vsolution vindex</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
index has to be 1 or larger - otherwise this function wil give an error. 
 This version can handle chords defined as intervals. 
 </p>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g180185">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
assign-pitches-for-nth-motif&nbsp;&nbsp;</td>
<td class="lambda-list">
engine vsolution vindex nth</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
index has to be 1 or larger - otherwise this function wil give an error. 
 This version can handle chords defined as intervals. 
 </p>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g180186">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
compare-timesign&nbsp;&nbsp;</td>
<td class="lambda-list">
find-this test-this</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
This is a test function for the find function in initiate-new-variable and fail 
 </p>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g180187">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
remove-n&nbsp;&nbsp;</td>
<td class="lambda-list">
n list</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g180188">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
rnd-perm&nbsp;&nbsp;</td>
<td class="lambda-list">
list</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g180189">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
initiate-new-variable&nbsp;&nbsp;</td>
<td class="lambda-list">
engine vindex vsolution vdomain meter-beatstructures meter-onsetgrids nr-of-engines rnd?</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g180190">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
set-timepoints-and-count-for-current-candidate&nbsp;&nbsp;</td>
<td class="lambda-list">
engine vindex vsolution meter-beatstructures meter-onsetgrids nr-of-engines</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
This functions assignes all extra infromation necessary for the current candidate in the vsolution array. Only the current candidate will be assigned the information. 
 This function is used by the fail-function and the initiate-new-variable-function. 
 </p>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g180191">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
fail&nbsp;&nbsp;</td>
<td class="lambda-list">
vcurrent-engine vsolution vlinear-solution vsolution-for-backjump vindex meter-beatstructures meter-onsetgrids nr-of-engines default-engine-order vbacktrack-history backtrackrule vbacktrack-engines vbackjump-indexes vflag-changed-engine vnumber-of-candidates vheuristic-rules debug?</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
Fail has many things in common with initiate new variable, since onsets, notecount and pitches have to be set for new candidates in both. 
 </p>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g180192">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
set-vbacktrack-history&nbsp;&nbsp;</td>
<td class="lambda-list">
vbacktrack-history vindex vsolution engine nr-of-engines</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g180193">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
backjump-engine-bad&nbsp;&nbsp;</td>
<td class="lambda-list">
engine vbackjump-indexes vbacktrack-history vindex vsolution</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
This functions backjumps by setting the backtrack history to the correct number of 
 backtracked steps (i.e. indexes) that was jumped. The trashed variables are set to nil. 
 </p>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g180194">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
backjump-engine&nbsp;&nbsp;</td>
<td class="lambda-list">
engine vbackjump-indexes vbacktrack-history vindex vsolution</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
This function does not compensate in the backtrack history when variables are skipped during backjumping. 
 This works better since variables that fail each other will be rebuilt in sequence this way. 
 </p>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g180195">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
backjump-engine&nbsp;&nbsp;</td>
<td class="lambda-list">
engine vbackjump-indexes vbacktrack-history vindex vsolution</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
This function does not compensate in the backtrack history when variables are skipped during backjumping. 
 This works better since variables that fail each other will be rebuilt in sequence this way. 
 </p>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g180196">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
get-index-during-search&nbsp;&nbsp;</td>
<td class="lambda-list">
engine</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
This function gives the user access to the vecor of indexes. 
 </p>
<p>
Note that if this is used in a rule that accesses more than one engine (for example r-rhythn-pitch-one-voice) 
 there is no guarantee that the indexes match up. Most likely they will not.Th euser need to understand what 
 engine the index belongs to, and only ask for the one the rule constrain. 
 </p>
</div>
</div>
</div>
<div class="cludg-footer">
Generated by&nbsp;<a href="mailto:ihatchondo@common-lisp.net" lang="en">
CLDOC</a>
- 2017-08-26 22:24:56</div>
</body>
</html>
